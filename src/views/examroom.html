<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizaci√≥n de Examen</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

    <!-- Direccionamiento a hoja de estilos particular -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container mt-5">
        <div id="quizContainer"></div> <!-- Changed from <form> to <div> and ID corrected -->
        <div class="text-center">
            <button class="finalizar btn btn-primary" id="submit">Enviar</button>
        </div>

        <script>
            var CP = 0;
            //function to display quiz
            function renderExamen(data) {
                const container = document.getElementById('examen-container');

                // Create a title
                const title = document.createElement('h1');
                title.textContent = `Examen de ${data.botResponse.content.tema}`;
                container.appendChild(title);

                // Iterate through questions
                data.botResponse.content.preguntas.forEach((pregunta, index) => {
                    // Create a question container
                    const questionContainer = document.createElement('div');
                    questionContainer.classList.add('pregunta-container');

                    // Create a question statement
                    const enunciado = document.createElement('p');
                    enunciado.textContent = `${index + 1}. ${pregunta.enunciado}`;
                    questionContainer.appendChild(enunciado);

                    // Create options
                    pregunta.opciones.forEach(opcion => {
                        const label = document.createElement('label');
                        const input = document.createElement('input');
                        input.type = 'radio';
                        input.name = `pregunta-${index}`;
                        input.value = opcion;
                        label.appendChild(input);
                        label.appendChild(document.createTextNode(opcion));
                        questionContainer.appendChild(label);
                        questionContainer.appendChild(document.createElement('br'));
                    });

                    // Append question container to main container
                    container.appendChild(questionContainer);
                });

                // Create a submit button
                const submitButton = document.createElement('button');
                submitButton.textContent = 'Enviar';
                submitButton.onclick = () => {
                    // Add your submit logic here
                    alert('Examen enviado');
                };
                container.appendChild(submitButton);
            }


            const examData = JSON.parse(localStorage.getItem('examData'));  //its an object 
            alert(JSON.stringify(examData));
            let exam2 = JSON.stringify(examData);
            const parsedExam = JSON.parse(exam2);
            const examData2 = JSON.parse(parsedExam.data);
            alert(examData2);
            renderExamen(examData2);


        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>